---
source: crates/tests/databases-tests/src/postgres/explain_tests.rs
expression: "result.details.get(\"experimental_delete_InvoiceLine_by_InvoiceLineId SQL Mutation\").unwrap()"
---
EXPLAIN WITH "%0_generated_mutation" AS (
  DELETE FROM
    "public"."InvoiceLine" AS "%2_InvoiceLine"
  WHERE
    EXISTS (
      SELECT
        *
      FROM
        "public"."Track" AS "%3_BOOLEXP_Track"
      WHERE
        (
          (
            "%2_InvoiceLine"."TrackId" = "%3_BOOLEXP_Track"."TrackId"
          )
          AND (
            ("%2_InvoiceLine"."InvoiceLineId" = 90)
            AND ("%3_BOOLEXP_Track"."TrackId" = 512)
          )
        )
    ) RETURNING *
)
SELECT
  json_build_object('result', row_to_json("%4_universe"), 'type', $1) AS "universe"
FROM
  (
    SELECT
      *
    FROM
      (
        SELECT
          coalesce(json_agg(row_to_json("%5_returning")), '[]') AS "returning"
        FROM
          (
            SELECT
              "%1_experimental_delete_InvoiceLine_by_InvoiceLineId"."InvoiceLineId" AS "invoice_line_id",
              "%1_experimental_delete_InvoiceLine_by_InvoiceLineId"."Quantity" AS "quantity"
            FROM
              "%0_generated_mutation" AS "%1_experimental_delete_InvoiceLine_by_InvoiceLineId"
          ) AS "%5_returning"
      ) AS "%5_returning"
      CROSS JOIN (
        SELECT
          COUNT(*) AS "affected_rows"
        FROM
          "%0_generated_mutation" AS "%1_experimental_delete_InvoiceLine_by_InvoiceLineId"
      ) AS "%6_aggregates"
  ) AS "%4_universe"
